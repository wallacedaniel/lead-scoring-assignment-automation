<?xml version="1.0" encoding="UTF-8"?>
<Process xmlns="http://soap.sforce.com/2006/04/metadata">
    <description>Approval process for high-value leads (Grade A)</description>
    <isActive>true</isActive>
    <label>Lead Assignment Approval</label>
    <processType>Approval</processType>
    <recordTypes>
        <recordType>Lead</recordType>
    </recordTypes>
    <steps>
        <step>
            <actions>
                <actionName>NotifySalesManager</actionName>
                <actionType>emailTemplate</actionType>
                <emailTemplate>Lead_HighValue_Approval_Notification</emailTemplate>
                <relatedToType>Lead</relatedToType>
                <supportsAdditionalRecipients>true</supportsAdditionalRecipients>
                <supportsChatterGroupRecipients>true</supportsChatterGroupRecipients>
                <supportsChatterUserRecipients>true</supportsChatterUserRecipients>
                <supportsEmailRecipients>true</supportsEmailRecipients>
                <supportsPublicGroupRecipients>true</supportsPublicGroupRecipients>
                <supportsRoleRecipients>true</supportsRoleRecipients>
                <supportsUserRecipients>true</supportsUserRecipients>
                <supportsUserTerritoryRecipients>true</supportsUserTerritoryRecipients>
            </actions>
            <approvalActions>
                <actionName>NotifySalesManager</actionName>
                <actionType>emailTemplate</actionType>
                <emailTemplate>Lead_HighValue_Approval_Notification</emailTemplate>
                <relatedToType>Lead</relatedToType>
                <supportsAdditionalRecipients>true</supportsAdditionalRecipients>
                <supportsChatterGroupRecipients>true</supportsChatterGroupRecipients>
                <supportsChatterUserRecipients>true</supportsChatterUserRecipients>
                <supportsEmailRecipients>true</supportsEmailRecipients>
                <supportsPublicGroupRecipients>true</supportsPublicGroupRecipients>
                <supportsRoleRecipients>true</supportsRoleRecipients>
                <supportsUserRecipients>true</supportsUserRecipients>
                <supportsUserTerritoryRecipients>true</supportsUserTerritoryRecipients>
            </approvalActions>
            <description>Submit for approval to Sales Manager</description>
            <isFinal>false</isFinal>
            <label>Submit for Approval</label>
            <nextSteps>
                <step>
                    <approvalActions>
                        <actionName>NotifySalesManager</actionName>
                        <actionType>emailTemplate</actionType>
                        <emailTemplate>Lead_HighValue_Approval_Approved</emailTemplate>
                        <relatedToType>Lead</relatedToType>
                        <supportsAdditionalRecipients>true</supportsAdditionalRecipients>
                        <supportsChatterGroupRecipients>true</supportsChatterGroupRecipients>
                        <supportsChatterUserRecipients>true</supportsChatterUserRecipients>
                        <supportsEmailRecipients>true</supportsEmailRecipients>
                        <supportsPublicGroupRecipients>true</supportsPublicGroupRecipients>
                        <supportsRoleRecipients>true</supportsRoleRecipients>
                        <supportsUserRecipients>true</supportsUserRecipients>
                        <supportsUserTerritoryRecipients>true</supportsUserTerritoryRecipients>
                    </approvalActions>
                    <description>Notify sales manager when approved</description>
                    <isFinal>true</isFinal>
                    <label>Approved</label>
                </step>
                <step>
                    <approvalActions>
                        <actionName>NotifySalesManager</actionName>
                        <actionType>emailTemplate</actionType>
                        <emailTemplate>Lead_HighValue_Approval_Rejected</emailTemplate>
                        <relatedToType>Lead</relatedToType>
                        <supportsAdditionalRecipients>true</supportsAdditionalRecipients>
                        <supportsChatterGroupRecipients>true</supportsChatterGroupRecipients>
                        <supportsChatterUserRecipients>true</supportsChatterUserRecipients>
                        <supportsEmailRecipients>true</supportsEmailRecipients>
                        <supportsPublicGroupRecipients>true</supportsPublicGroupRecipients>
                        <supportsRoleRecipients>true</supportsRoleRecipients>
                        <supportsUserRecipients>true</supportsUserRecipients>
                        <supportsUserTerritoryRecipients>true</supportsUserTerritoryRecipients>
                    </approvalActions>
                    <description>Notify sales manager when rejected</description>
                    <isFinal>true</isFinal>
                    <label>Rejected</label>
                </step>
            </nextSteps>
            <stepType>Approval</stepType>
            <targetObject>Lead</targetObject>
            <targetObjectField>Id</targetObjectField>
            <targetObjectFieldValue>{!Lead.Id}</targetObjectFieldValue>
            <targetObjectLabel>Lead</targetObjectLabel>
            <targetObjectLabelField>Id</targetObjectLabelField>
            <targetObjectLabelFieldValue>{!Lead.Id}</targetObjectLabelFieldValue>
            <targetObjectLabelType>Id</targetObjectLabelType>
            <targetObjectLabelTypeField>Id</targetObjectLabelTypeField>
            <targetObjectLabelTypeFieldValue>{!Lead.Id}</targetObjectLabelTypeFieldValue>
            <targetObjectLabelTypeValue>Id</targetObjectLabelTypeValue>
            <targetObjectLabelValue>{!Lead.Id}</targetObjectLabelValue>
            <targetObjectValue>{!Lead.Id}</targetObjectValue>
            <targetObjectValueType>Id</targetObjectValueType>
            <targetObjectValueTypeField>Id</targetObjectValueTypeField>
            <targetObjectValueTypeFieldValue>{!Lead.Id}</targetObjectValueTypeFieldValue>
            <targetObjectValueTypeValue>Id</targetObjectValueTypeValue>
            <targetObjectValueValue>{!Lead.Id}</targetObjectValueValue>
            <targetObjectValueValueType>Id</targetObjectValueValueType>
            <targetObjectValueValueTypeField>Id</targetObjectValueValueTypeField>
            <targetObjectValueValueTypeFieldValue>{!Lead.Id}</targetObjectValueValueTypeFieldValue>
            <targetObjectValueValueTypeValue>Id</targetObjectValueValueTypeValue>
        </step>
    </steps>
</Process>
